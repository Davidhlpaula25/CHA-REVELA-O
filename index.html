<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√° Revela√ß√£o: Kerolly ou Th√©o?</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8;
            color: #4b5563;
            overflow-x: hidden;
        }

        .floating-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(255, 105, 180, 0.5);
            border-radius: 50%;
            animation: float 10s infinite ease-in-out;
            opacity: 0;
        }
        
        .particle-blue {
            background: rgba(173, 216, 230, 0.5);
        }

        .heart {
            font-size: 2rem;
            color: #ffc0cb;
            position: absolute;
            animation: float 15s infinite ease-in-out;
            opacity: 0;
            text-shadow: 0 0 5px rgba(255, 105, 180, 0.5);
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        .form-card {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            position: relative;
            z-index: 10;
        }

        input[type="text"], input[type="number"], select, textarea {
            transition: all 0.3s;
            background-color: #f9fafb;
            border-color: #d1d5db;
        }

        input[type="text"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ffc0cb;
            box-shadow: 0 0 0 2px #ffc0cb;
        }

        .button-primary {
            transition: all 0.3s;
        }

        .button-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .admin-link {
            color: #9ca3af;
            font-size: 0.75rem;
            text-decoration: underline;
            transition: color 0.3s;
        }
        .admin-link:hover {
            color: #4b5563;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen relative p-4">
    <div class="max-w-xl mx-auto w-full p-6 bg-white rounded-xl shadow-2xl z-10 form-card transition-all duration-500">
        <div class="floating-particles"></div>
        <img src="foto.png" alt="Convite Ch√° Revela√ß√£o" class="w-full h-auto rounded-lg shadow-md mb-6 relative z-10">

        <h3 class="text-2xl font-semibold mb-2 text-pink-500 relative z-10">Confirme sua presen√ßa</h3>
        <p class="text-sm text-gray-600 mb-6 relative z-10">Contamos com seu Mimo para tornar esse dia ainda mais especial! (opcional)</p>

        <form id="presenceForm" class="space-y-4 relative z-10">
            <div>
                <label for="nome" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo:</label>
                <input type="text" id="nome" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-300 focus:ring focus:ring-pink-200 focus:ring-opacity-50 transition-all duration-200">
            </div>

            <div>
                <label for="pessoas" class="block text-sm font-medium text-gray-700 mb-1">N√∫mero de adultos (incluindo voc√™):</label>
                <input type="number" id="pessoas" min="1" value="1" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-300 focus:ring focus:ring-pink-200 focus:ring-opacity-50 transition-all duration-200">
            </div>

            <div>
                <label for="confirmacao" class="block text-sm font-medium text-gray-700 mb-1">Vai comparecer?</label>
                <select id="confirmacao" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-300 focus:ring focus:ring-pink-200 focus:ring-opacity-50 transition-all duration-200">
                    <option value="Sim">Sim</option>
                    <option value="N√£o">N√£o</option>
                </select>
            </div>
            
            <div>
                <label for="fralda" class="block text-sm font-medium text-gray-700 mb-1">Tamanho da fralda que vai levar:</label>
                <select id="fralda" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-300 focus:ring focus:ring-pink-200 focus:ring-opacity-50 transition-all duration-200">
                    <option value="M">M</option>
                    <option value="G">G</option>
                </select>
            </div>
            
            <!-- Novo campo para o recado opcional -->
            <div>
                <label for="mensagem" class="block text-sm font-medium text-gray-700 mb-1" >Deixe uma mensagem para os futuros papais:</label>
                <textarea id="mensagem" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-300 focus:ring focus:ring-pink-200 focus:ring-opacity-50 transition-all duration-200" required></textarea>
            </div>
            
            <button type="submit" id="submitButton" class="w-full bg-pink-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50 button-primary">
                Enviar( )
            </button>
        </form>
        <div id="message" class="mt-4 text-center text-sm font-semibold relative z-10"></div>
    </div>
    
    <a href="admin.html" class="mt-8 admin-link relative z-10">Painel de Administra√ß√£o</a>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyCjV8eAK679i4rPABYh6FgYxwsMaXfJ-4E",
          authDomain: "cha-revelacao-c436f.firebaseapp.com",
          projectId: "cha-revelacao-c436f",
          storageBucket: "cha-revelacao-c436f.firebasestorage.app",
          messagingSenderId: "279890578009",
          appId: "1:279890578009:web:7d24db4e75493b8ba43f48"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const form = document.getElementById('presenceForm');
        const submitButton = document.getElementById('submitButton');
        const messageDiv = document.getElementById('message');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            submitButton.disabled = true;
            messageDiv.innerText = "Enviando...";
            
            try {
                const nome = document.getElementById('nome').value;
                const pessoas = document.getElementById('pessoas').value;
                const confirmacao = document.getElementById('confirmacao').value;
                const fralda = document.getElementById('fralda').value;
                const mensagemElement = document.getElementById('mensagem');
                const mensagem = mensagemElement ? mensagemElement.value : 'Nenhuma mensagem deixada';

                database.ref('convidados').push({
                    nome: nome,
                    pessoas: pessoas,
                    confirmacao: confirmacao,
                    fralda: fralda,
                    mensagem: mensagem,
                    timestamp: new Date().toISOString()
                }).then(() => {
                    messageDiv.innerText = "Confirma√ß√£o enviada! Obrigado.";
                    form.reset();
                    submitButton.disabled = false;
                }).catch(error => {
                    messageDiv.innerText = "Erro ao enviar. Verifique o console para mais detalhes.";
                    console.error("Erro ao escrever no banco de dados:", error);
                    submitButton.disabled = false;
                });
            } catch (error) {
                messageDiv.innerText = "Erro inesperado. Verifique o console.";
                console.error("Erro inesperado:", error);
                submitButton.disabled = false;
            }
        });

        // Adiciona part√≠culas e cora√ß√µes de fundo
        document.addEventListener('DOMContentLoaded', () => {
            const particlesContainer = document.querySelector('.floating-particles');
            const particleCount = 25;
            for (let i = 0; i < particleCount; i++) {
                const isHeart = Math.random() > 0.5;
                const element = document.createElement('div');
                element.style.left = `${Math.random() * 100}%`;
                element.style.animationDuration = `${Math.random() * 10 + 10}s`;
                element.style.animationDelay = `${Math.random() * 5}s`;
                element.style.top = `${Math.random() * 100}%`;

                if (isHeart) {
                    element.className = 'heart';
                    element.innerText = 'üíñ';
                } else {
                    element.className = 'particle';
                    element.style.width = `${Math.random() * 10 + 5}px`;
                    element.style.height = element.style.width;
                    if (Math.random() > 0.5) {
                        element.classList.add('particle-blue');
                    }
                }
                particlesContainer.appendChild(element);
            }
        });
    </script>
</body>
</html>
